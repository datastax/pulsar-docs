= Luna Streaming built-in monitoring

Luna Streaming deploys with the Prometheus stack (Prometheus, Alertmanager, and Grafana) for monitoring your cluster. See https://github.com/prometheus-operator/kube-prometheus[kube-prometheus] for full documentation on the Prometheus stack and its components. 

== Enabling the Prometheus stack

To enable the Prometheus stack, use the following settings in your `values.yaml` file:

----
kube-prometheus-stack:
  enabled: true
----

To enable the Grafana dashboards, use the following settings in your `values.yaml` file:

----
grafanaDashboards:
  enabled: true
----

To enable the Kubernetes default rules, use the following settings in your `values.yaml` file:

----
kube-prometheus-stack:
  defaultRules:
    create: true
----

== Accessing Prometheus stack

Access the Prometheus, Grafana, and Alertmanager dashboards with `kubectl port-forward` after deploying Luna Streaming.

=== Accessing Prometheus
----
$ kubectl --namespace monitoring port-forward svc/prometheus-k8s 9090
----

Access the Prometheus dashboard via `http://localhost:9090`.

=== Accessing Grafana

----
$ kubectl --namespace monitoring port-forward svc/grafana 3000
----

Access the Grafana dashboard via `http://localhost:3000`. Use the Grafana login credentials listed in `values.yaml`.

=== Accessing Alert Manager

----
$ kubectl --namespace monitoring port-forward svc/alertmanager-main 9093
----

Access the Alert Manager dashboard via `http://localhost:9093`.

== Accessing Prometheus Stack via Cloud Provider

After you've deployed Luna Streaming in a cloud provider, access the built-in monitoring via the Load Balancer IP listed by your cloud provider:

image::gcp-all-pods.png[GCP Pods]

== Ingress

If you're having trouble accessing your web interfaces via the exposed ports, ensure ingress to your Kubernetes cluster has been set up correctly. Detailed instructions for ingress are available https://github.com/prometheus-operator/kube-prometheus/blob/main/docs/customizations/exposing-prometheus-alertmanager-grafana-ingress.md[here].

== Next 

Learn more about managing your cluster with the Luna Streaming admin console xref:admin-console-tutorial.adoc[here].