# Luna Streaming built-in monitoring

## Enabling the Prometheus stack

You can enable a full Prometheus stack (Prometheus, Alertmanager, Grafana) from [kube-prometheus](https://github.com/prometheus-operator/kube-prometheus). This includes default Prometheus rules and Grafana dashboards for Kubernetes. 

In an addition, this chart can deploy Grafana dashboards for Pulsar as well as Pulsar-specific rules for Prometheus. 

To deploy the Prometheus stack, use the following setting in your values file:

```
kube-prometheus-stack:
  enabled: true
```

To enable the Grafana dashboards, use the following setting:

```
grafanaDashboards:
  enabled: true
```

To enable the Kubernetes default rules, use the following setting:
```
kube-prometheus-stack:
  defaultRules:
    create: true
```

## Accessing Grafana Dashboard

Start the minikube tunnel:

```
minikube tunnel
```

Open your browser to http://localhost to view the Admin Console:

![Admin Console](assets/admin_console.png?raw=true "Admin Console")


You can view the embedded Grafana charts using the Cluster/Monitoring menu in the Admin Console:

![Grafana in Admin Console](assets/grafana.png?raw=true "Grafana in Admin Console")

Grafana is password protected. The username is `admin`. You can get the password with this command:

```
kubectl get secret pulsar-grafana -o=jsonpath="{.data.admin-password}" | base64 --decode
```

